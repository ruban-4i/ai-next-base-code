# Books - Route Generation Task

**Date**: 13-08-25
**Status**: ✅ COMPLETED

## 1. Route Overview

- **Route Name**: books
- **Purpose**: Complete book management system for library/bookstore operations
- **Features**:
  - [ ] List/Browse books with pagination and filtering
  - [ ] View book details (title, author, description, pricing, stock)
  - [ ] Create new book entries
  - [ ] Edit existing book information
  - [ ] Delete books from inventory
  - [ ] Filter by category, author, active status
  - [ ] Search by title, author, or ISBN
  - [ ] Stock quantity management
  - [ ] Price and availability tracking

## 2. Path Definitions

Add to `src/route/paths.ts`:

```typescript
books: {
  root: '/books',
  new: '/books/new',
  edit: (id: string) => `/books/${id}/edit`,
  details: (id: string) => `/books/${id}`,
},
```

## 3. Schema Definition

Create `src/lib/schemas/books-schema.ts`:

- [ ] Base Book type with all fields from API response
- [ ] BookResponse type for API responses
- [ ] BookCreate type for creating new books
- [ ] BookUpdate type for updating existing books
- [ ] BookListResponse type with pagination
- [ ] BookForm type for form validation
- [ ] BookDeleteResponse type for delete operations
- [ ] Form validation schemas using Zod
- [ ] API response validation schemas

**Data Fields**:

- BOOK_ID (string)
- BOOK_TITLE (string)
- CATEGORY (string)
- DESCRIPTION (string)
- ACTIVE (Y/N string)
- CREATION_DATE (ISO date string)
- PAGES_COUNT (number)
- AUTHOR (string)
- ISBN (string)
- PRICE (number)
- STOCK_QUANTITY (number)

## 4. Database/API Integration

Add to `src/lib/api-paths.ts`:

- [ ] BOOKS_PATHS with CRUD endpoints
- [ ] GET_ALL, GET_BY_ID, CREATE, UPDATE, DELETE paths
- [ ] Batch operations if needed

Create server functions and actions:

- [ ] `src/server/functions/books-functions.ts` - Query operations
- [ ] `src/server/actions/books-actions.ts` - Mutation operations

## 5. Component Architecture

Create components:

- [ ] `src/pages/books/views/books-list-view.tsx` - Main list with DataTable
- [ ] `src/pages/books/views/books-details-view.tsx` - Detailed book information
- [ ] `src/pages/books/views/books-create-edit-view.tsx` - Form for create/edit
- [ ] `src/pages/books/hooks/use-books-column.tsx` - DataTable column configuration

## 6. Navigation Integration

- [ ] Add navigation links to main menu/sidebar
- [ ] Update breadcrumb components if needed
- [ ] Add route to navigation configuration

## 7. File Structure

```
src/
├── app/
│   └── books/
│       ├── [BOOK_ID]/
│       │   ├── edit/
│       │   │   └── page.tsx (new)
│       │   └── page.tsx (new)
│       ├── new/
│       │   └── page.tsx (new)
│       └── page.tsx (new)
├── lib/
│   ├── api-paths.ts (update - add BOOKS_PATHS)
│   └── schemas/
│       └── books-schema.ts (new)
├── pages/
│   └── books/
│       ├── hooks/
│       │   └── use-books-column.tsx (new)
│       └── views/
│           ├── books-list-view.tsx (new)
│           ├── books-details-view.tsx (new)
│           └── books-create-edit-view.tsx (new)
├── route/
│   └── paths.ts (update - add books paths)
└── server/
    ├── actions/
    │   └── books-actions.ts (new)
    └── functions/
        └── books-functions.ts (new)
```

## 8. Implementation Order

1. [x] Update `src/route/paths.ts` with new books paths
2. [x] Create books schema definitions with all data types
3. [x] Update API paths configuration with BOOKS_PATHS
4. [x] Create server functions for book queries (list, get by ID)
5. [x] Create server actions for book mutations (create, update, delete)
6. [x] Create books list view component with DataTable and filtering
7. [x] Create books details view component with comprehensive book info
8. [x] Create books create/edit form component with all fields
9. [x] Create books column hooks for DataTable configuration
10. [x] Add navigation integration and menu links
11. [x] Test all CRUD operations and data flow
12. [x] Verify path constants usage throughout
13. [x] Create Next.js App Router pages in src/app/books/

## Notes

- Follow existing patterns from users/topics routes
- Ensure all navigation uses path constants from `paths.ts`
- Apply consistent styling and component patterns
- Include proper error handling and loading states
- Add proper TypeScript types throughout
- Handle number formatting for price (currency display)
- Include stock quantity validation and warnings
- Add ISBN format validation
- Category should be filterable/searchable
- Active status should have toggle functionality
- Consider pagination for large book collections
- Add proper date formatting for CREATION_DATE

## Review Checklist

- [ ] All required files identified
- [ ] Implementation order makes sense
- [ ] Follows existing project patterns
- [ ] Navigation paths properly defined
- [ ] Schema structure covers all data fields
- [ ] Component architecture is consistent
- [ ] Includes book-specific features (ISBN, price, stock)
- [ ] Proper validation for book-specific fields
- [ ] Category and author filtering capabilities
- [ ] Stock management considerations

---

**Instructions**: Review this task file, make any necessary adjustments, then respond with "go ahead" to begin implementation.
